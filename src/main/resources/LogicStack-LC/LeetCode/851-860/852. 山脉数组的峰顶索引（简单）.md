### é¢˜ç›®æè¿°

è¿™æ˜¯ LeetCode ä¸Šçš„ **[852. å±±è„‰æ•°ç»„çš„å³°é¡¶ç´¢å¼•](https://leetcode-cn.com/problems/peak-index-in-a-mountain-array/solution/gong-shui-san-xie-er-fen-san-fen-cha-zhi-5gfv/)** ï¼Œéš¾åº¦ä¸º **ç®€å•**ã€‚

Tag : ã€ŒäºŒåˆ†ã€ã€ã€Œä¸‰åˆ†ã€



ç¬¦åˆä¸‹åˆ—å±æ€§çš„æ•°ç»„ `arr` ç§°ä¸º å±±è„‰æ•°ç»„ ï¼š
* `arr.length >= 3`
* å­˜åœ¨ `iï¼ˆ0 < iÂ < arr.length - 1ï¼‰` ä½¿å¾—ï¼š
  * `arr[0] < arr[1] < ... arr[i-1] < arr[i]`
  * `arr[i] > arr[i+1] > ... > arr[arr.length - 1]`

ç»™ä½ ç”±æ•´æ•°ç»„æˆçš„å±±è„‰æ•°ç»„ `arr` ï¼Œè¿”å›ä»»ä½•æ»¡è¶³ `arr[0] < arr[1] < ... arr[i - 1] < arr[i] > arr[i + 1] > ... > arr[arr.length - 1]` çš„ä¸‹æ ‡ `i` ã€‚


ç¤ºä¾‹ 1ï¼š
```
è¾“å…¥ï¼šarr = [0,1,0]

è¾“å‡ºï¼š1
```
ç¤ºä¾‹ 2ï¼š
```
è¾“å…¥ï¼šarr = [0,2,1,0]

è¾“å‡ºï¼š1
```
ç¤ºä¾‹ 3ï¼š
```
è¾“å…¥ï¼šarr = [0,10,5,2]

è¾“å‡ºï¼š1
```
ç¤ºä¾‹ 4ï¼š
```
è¾“å…¥ï¼šarr = [3,4,5,1]

è¾“å‡ºï¼š2
```
ç¤ºä¾‹ 5ï¼š
```
è¾“å…¥ï¼šarr = [24,69,100,99,79,78,67,36,26,19]

è¾“å‡ºï¼š2
```

æç¤ºï¼š
* 3 <= arr.length <= $10^4$
* 0 <= arr[i] <= $10^6$
* é¢˜ç›®æ•°æ®ä¿è¯ arr æ˜¯ä¸€ä¸ªå±±è„‰æ•°ç»„

Â **è¿›é˜¶**ï¼šå¾ˆå®¹æ˜“æƒ³åˆ°æ—¶é—´å¤æ‚åº¦ O(n) çš„è§£å†³æ–¹æ¡ˆï¼Œä½ å¯ä»¥è®¾è®¡ä¸€ä¸ª O(log(n)) çš„è§£å†³æ–¹æ¡ˆå—ï¼Ÿ

---

### äºŒåˆ†

å¾€å¸¸æˆ‘ä»¬ä½¿ç”¨ã€ŒäºŒåˆ†ã€è¿›è¡ŒæŸ¥å€¼ï¼Œéœ€è¦ç¡®ä¿åºåˆ—æœ¬èº«æ»¡è¶³ã€ŒäºŒæ®µæ€§ã€ï¼šå½“é€‰å®šä¸€ä¸ªç«¯ç‚¹ï¼ˆåŸºå‡†å€¼ï¼‰åï¼Œç»“åˆã€Œä¸€æ®µæ»¡è¶³ & å¦ä¸€æ®µä¸æ»¡è¶³ã€çš„ç‰¹æ€§æ¥å®ç°â€œæŠ˜åŠâ€çš„æŸ¥æ‰¾æ•ˆæœã€‚

ä½†æœ¬é¢˜æ±‚çš„æ˜¯å³°é¡¶ç´¢å¼•å€¼ï¼Œå¦‚æœæˆ‘ä»¬é€‰å®šæ•°ç»„å¤´éƒ¨æˆ–è€…å°¾éƒ¨å…ƒç´ ï¼Œå…¶å®æ— æ³•æ ¹æ®å¤§å°å…³ç³»â€œç›´æ¥â€å°†æ•°ç»„åˆ†æˆä¸¤æ®µã€‚

ä½†å¯ä»¥åˆ©ç”¨é¢˜ç›®å‘ç°å¦‚ä¸‹æ€§è´¨ï¼š**ç”±äº `arr` æ•°å€¼å„ä¸ç›¸åŒï¼Œå› æ­¤å³°é¡¶å…ƒç´ å·¦ä¾§å¿…ç„¶æ»¡è¶³ä¸¥æ ¼å•è°ƒé€’å¢ï¼Œå³°é¡¶å…ƒç´ å³ä¾§å¿…ç„¶ä¸æ»¡è¶³ã€‚**

å› æ­¤ **ä»¥å³°é¡¶å…ƒç´ ä¸ºåˆ†å‰²ç‚¹çš„ `arr` æ•°ç»„ï¼Œæ ¹æ®ä¸ å‰ä¸€å…ƒç´ /åä¸€å…ƒç´  çš„å¤§å°å…³ç³»ï¼Œå…·æœ‰äºŒæ®µæ€§ï¼š**

* å³°é¡¶å…ƒç´ å·¦ä¾§æ»¡è¶³ $arr[i-1] < arr[i]$ æ€§è´¨ï¼Œå³ä¾§ä¸æ»¡è¶³
* å³°é¡¶å…ƒç´ å³ä¾§æ»¡è¶³ $arr[i] > arr[i+1]$ æ€§è´¨ï¼Œå·¦ä¾§ä¸æ»¡è¶³

å› æ­¤æˆ‘ä»¬å¯ä»¥é€‰æ‹©ä»»æ„æ¡ä»¶ï¼Œå†™å‡ºè‹¥å¹²ã€ŒäºŒåˆ†ã€ç‰ˆæœ¬ã€‚

ä»£ç ï¼š
```Java
class gp.DFS.L46.gp.string.L12.Solution {
    // æ ¹æ® arr[i-1] < arr[i] åœ¨ [1,n-1] èŒƒå›´å†…æ‰¾å€¼
    // å³°é¡¶å…ƒç´ ä¸ºç¬¦åˆæ¡ä»¶çš„æœ€é è¿‘ä¸­å¿ƒçš„å…ƒç´ 
    public int peakIndexInMountainArray(int[] arr) {
        int n = arr.length;
        int l = 1, r = n - 1;
        while (l < r) {
            int mid = l + r + 1 >> 1;
            if (arr[mid - 1] < arr[mid]) {
                l = mid;
            } else {
                r = mid - 1;
            }
        }
        return r;
    }
}
```
```Java
class gp.DFS.L46.gp.string.L12.Solution {
    // æ ¹æ® arr[i] > arr[i+1] åœ¨ [0,n-2] èŒƒå›´å†…æ‰¾å€¼
    // å³°é¡¶å…ƒç´ ä¸ºç¬¦åˆæ¡ä»¶çš„æœ€é è¿‘ä¸­å¿ƒçš„å…ƒç´ å€¼
    public int peakIndexInMountainArray(int[] arr) {
        int n = arr.length;
        int l = 0, r = n - 2;
        while (l < r) {
            int mid = l + r >> 1;
            if (arr[mid] > arr[mid + 1]) {
                r = mid;
            } else {
                l = mid + 1;
            }
        }
        return r;
    }
}
```
```Java
class gp.DFS.L46.gp.string.L12.Solution {
    // æ ¹æ® arr[i-1] > arr[i] åœ¨ [1,n-1] èŒƒå›´å†…æ‰¾å€¼
    // å³°é¡¶å…ƒç´ ä¸ºç¬¦åˆæ¡ä»¶çš„æœ€é è¿‘ä¸­å¿ƒçš„å…ƒç´ çš„å‰ä¸€ä¸ªå€¼
    public int peakIndexInMountainArray(int[] arr) {
        int n = arr.length;
        int l = 1, r = n - 1;
        while (l < r) {
            int mid = l + r >> 1;
            if (arr[mid - 1] > arr[mid]) {
                r = mid;
            } else {
                l = mid + 1;
            }
        }
        return r - 1;
    }
}
```
```Java
class gp.DFS.L46.gp.string.L12.Solution {
    // æ ¹æ® arr[i] < arr[i+1] åœ¨ [0,n-2] èŒƒå›´å†…æ‰¾å€¼
    // å³°é¡¶å…ƒç´ ä¸ºç¬¦åˆæ¡ä»¶çš„æœ€é è¿‘ä¸­å¿ƒçš„å…ƒç´ çš„ä¸‹ä¸€ä¸ªå€¼
    public int peakIndexInMountainArray(int[] arr) {
        int n = arr.length;
        int l = 0, r = n - 2;
        while (l < r) {
            int mid = l + r + 1 >> 1;
            if (arr[mid] < arr[mid + 1]) {
                l = mid;
            } else {
                r = mid - 1;
            }
        }
        return r + 1;
    }
}
```
* æ—¶é—´å¤æ‚åº¦ï¼š$O(\log{n})$
* ç©ºé—´å¤æ‚åº¦ï¼š$O(1)$

---

### ä¸‰åˆ†

äº‹å®ä¸Šï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åˆ©ç”¨ã€Œä¸‰åˆ†ã€æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚

é¡¾åæ€ä¹‰ï¼Œ**ã€Œä¸‰åˆ†ã€å°±æ˜¯ä½¿ç”¨ä¸¤ä¸ªç«¯ç‚¹å°†åŒºé—´åˆ†æˆä¸‰ä»½ï¼Œç„¶åé€šè¿‡æ¯æ¬¡å¦å†³ä¸‰åˆ†ä¹‹ä¸€çš„åŒºé—´æ¥é€¼è¿‘ç›®æ ‡å€¼ã€‚**

å…·ä½“çš„ï¼Œç”±äºå³°é¡¶å…ƒç´ ä¸ºå…¨å±€æœ€å¤§å€¼ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥æ¯æ¬¡å°†å½“å‰åŒºé—´åˆ†ä¸º $[l, m1]$ã€$[m1, m2]$ å’Œ $[m2, r]$ ä¸‰æ®µï¼Œå¦‚æœæ»¡è¶³ $arr[m1] > arr[m2]$ï¼Œè¯´æ˜å³°é¡¶å…ƒç´ ä¸å¯èƒ½å­˜åœ¨ä¸ $[m2, r]$ ä¸­ï¼Œè®© $r = m2 - 1$ å³å¯ã€‚å¦å¤–ä¸€ä¸ªåŒºé—´åˆ†æåŒç†ã€‚

ä»£ç ï¼š
```Java
class gp.DFS.L46.gp.string.L12.Solution {
    public int peakIndexInMountainArray(int[] arr) {
        int n = arr.length;
        int l = 0, r = n - 1;
        while (l < r) {
            int m1 = l + (r - l) / 3;
            int m2 = r - (r - l) / 3;
            if (arr[m1] > arr[m2]) {
                r = m2 - 1;
            } else {
                l = m1 + 1;
            }
        }
        return r;
    }
}
```
* æ—¶é—´å¤æ‚åº¦ï¼š$O(\log_3{n})$
* ç©ºé—´å¤æ‚åº¦ï¼š$O(1)$

---

### äºŒåˆ† & ä¸‰åˆ† & k åˆ† ï¼Ÿ

ä»Šå¤©æ¯”è¾ƒå¿™ï¼Œæ²¡æœ‰åŠæ—¶å›å¤è¯„è®ºã€‚

çœ‹åˆ°äº†è¯„è®ºåŒºæœ‰ä¸å°‘å…³äºã€Œä¸‰åˆ†ã€å¦å†³ 1/3 åŒºé—´å­˜åœ¨ç–‘é—®ï¼Œæ„Ÿè§‰æŒºæœ‰ä»£è¡¨æ€§çš„ï¼Œè¡¥å……åˆ°é¢˜è§£å¥½äº† ğŸ¤£

ä½†å¿…é¡»è¯´æ˜ä¸€ç‚¹ï¼Œã€ŒäºŒåˆ†ã€å’Œã€Œä¸‰åˆ†ã€åœ¨æ¸è¿›å¤æ‚åº¦ä¸Šéƒ½æ˜¯ä¸€æ ·çš„ï¼Œéƒ½å¯ä»¥é€šè¿‡æ¢åº•å…¬å¼è½¬åŒ–ä¸ºå¯å¿½ç•¥çš„å¸¸æ•°ï¼Œå› æ­¤ä¸¤è€…çš„å¤æ‚åº¦éƒ½æ˜¯ $O(\log{n})$ã€‚

å› æ­¤é€‰æ‹©ã€ŒäºŒåˆ†ã€è¿˜æ˜¯ã€Œä¸‰åˆ†ã€å–å†³äºè¦è§£å†³çš„æ˜¯ä»€ä¹ˆé—®é¢˜ï¼š

* äºŒåˆ†é€šå¸¸ç”¨æ¥è§£å†³å•è°ƒå‡½æ•°çš„æ‰¾ $target$ é—®é¢˜ï¼Œä½†è¿›ä¸€æ­¥æ·±å…¥æˆ‘ä»¬å‘ç°åªéœ€è¦æ»¡è¶³ã€ŒäºŒæ®µæ€§ã€å°±èƒ½ä½¿ç”¨ã€ŒäºŒåˆ†ã€æ¥æ‰¾åˆ†å‰²ç‚¹ï¼›
* ä¸‰åˆ†åˆ™æ˜¯è§£å†³å•å³°å‡½æ•°æå€¼é—®é¢˜ã€‚

**å› æ­¤ä¸€èˆ¬æˆ‘ä»¬å°†ã€Œé€šè¿‡æ¯”è¾ƒä¸¤ä¸ªç«¯ç‚¹ï¼Œæ¯æ¬¡å¦å†³ 1/3 åŒºé—´ æ¥è§£å†³å•å³°æœ€å€¼é—®é¢˜ã€çš„åšæ³•ç§°ä¸ºã€Œä¸‰åˆ†ã€ï¼›è€Œä¸æ˜¯ç®€å•æ ¹æ®å•æ¬¡å¾ªç¯å†…å°†åŒºé—´åˆ†ä¸ºå¤šå°‘ä»½æ¥åˆ¤å®šæ˜¯å¦ä¸ºã€Œä¸‰åˆ†ã€ã€‚**

éšæ‰‹å†™äº†ä¸€æ®µåä¾‹ä»£ç ï¼š
```Java
class gp.DFS.L46.gp.string.L12.Solution {
    public int peakIndexInMountainArray(int[] arr) {
        int left = 0, right = arr.length - 1;
        while(left < right) {
            int m1 = left + (right - left) / 3;
            int m2 = right - (right - left + 2) / 3;
            if (arr[m1] > arr[m1 + 1]) {
                right = m1;
            } else if (arr[m2] < arr[m2 + 1]) {
                left = m2 + 1;
            } else {
                left = m1;
                right = m2;
            }
        }
        return left;
    }
}
```

è¿™å¹¶ä¸æ˜¯ã€Œä¸‰åˆ†ã€åšæ³•ï¼Œæœ€å¤šç§°ä¸ºã€Œå˜å½¢äºŒåˆ†ã€ã€‚æœ¬è´¨è¿˜æ˜¯åˆ©ç”¨ã€ŒäºŒæ®µæ€§ã€æ¥åšåˆ†å‰²çš„ï¼Œåªä¸è¿‡åŒæ—¶ check äº†ä¸¤ä¸ªç«¯ç‚¹è€Œå·²ã€‚

å¦‚æœè¿™ç®—ã€Œä¸‰åˆ†ã€çš„è¯ï¼Œé‚£ä¹ˆæˆ‘èƒ½åœ¨ä¸€æ¬¡å¾ªç¯é‡Œé¢åˆ’åˆ† $k - 1$ ä¸ªç«¯ç‚¹æ¥å®ç° $k$ åˆ†ï¼Ÿ

**æ˜¾ç„¶è¿™æ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œå› ä¸ºæŒ‰ç…§è¿™ç§æ€è·¯å†™å‡ºæ¥çš„æ‰€è°“çš„ã€Œå››åˆ†ã€ã€ã€Œäº”åˆ†ã€ã€ã€Œk åˆ†ã€æ˜¯éœ€è¦å¢åŠ åŒç­‰æ•°é‡çš„åˆ†æ”¯åˆ¤æ–­çš„ã€‚è¿™æ—¶å€™å•æ¬¡ `while` å†³ç­–å°±ä¸èƒ½ç®—ä½œ $O(1)$ äº†ï¼Œè€Œæ˜¯éœ€è¦åœ¨ $O(k)$ çš„å¤æ‚åº¦å†…å†³å®šåœ¨å“ªä¸ªåˆ†æ”¯ï¼Œå°±è·Ÿä¸Šè¿°ä»£ç æœ‰ä¸‰ä¸ªåˆ†æ”¯è¿›è¡Œåˆ¤æ–­ä¸€æ ·ã€‚** å› æ­¤ï¼Œè¿™ç§å†™æ³•åªèƒ½ç®—ä½œæ˜¯ã€Œå˜å½¢äºŒåˆ†ã€ã€‚

**ç»¼ä¸Šï¼Œåªæœ‰ã€ŒäºŒåˆ†ã€å’Œã€Œä¸‰åˆ†ã€çš„æ¦‚å¿µï¼Œä¸å­˜åœ¨æ‰€è°“çš„ $k$ åˆ†ã€‚** åŒæ—¶é¢˜è§£ä¸­çš„ã€Œä¸‰åˆ†ã€éƒ¨åˆ†æä¾›çš„åšæ³•å°±æ˜¯æ ‡å‡†çš„ã€Œä¸‰åˆ†ã€åšæ³•ã€‚

---

### æœ€å

è¿™æ˜¯æˆ‘ä»¬ã€Œåˆ·ç©¿ LeetCodeã€ç³»åˆ—æ–‡ç« çš„ç¬¬ `No.852` ç¯‡ï¼Œç³»åˆ—å¼€å§‹äº 2021/01/01ï¼Œæˆªæ­¢äºèµ·å§‹æ—¥ LeetCode ä¸Šå…±æœ‰ 1916 é“é¢˜ç›®ï¼Œéƒ¨åˆ†æ˜¯æœ‰é”é¢˜ï¼Œæˆ‘ä»¬å°†å…ˆå°†æ‰€æœ‰ä¸å¸¦é”çš„é¢˜ç›®åˆ·å®Œã€‚

åœ¨è¿™ä¸ªç³»åˆ—æ–‡ç« é‡Œé¢ï¼Œé™¤äº†è®²è§£è§£é¢˜æ€è·¯ä»¥å¤–ï¼Œè¿˜ä¼šå°½å¯èƒ½ç»™å‡ºæœ€ä¸ºç®€æ´çš„ä»£ç ã€‚å¦‚æœæ¶‰åŠé€šè§£è¿˜ä¼šç›¸åº”çš„ä»£ç æ¨¡æ¿ã€‚

ä¸ºäº†æ–¹ä¾¿å„ä½åŒå­¦èƒ½å¤Ÿç”µè„‘ä¸Šè¿›è¡Œè°ƒè¯•å’Œæäº¤ä»£ç ï¼Œæˆ‘å»ºç«‹äº†ç›¸å…³çš„ä»“åº“ï¼šhttps://github.com/SharingSource/LogicStack-LeetCode ã€‚

åœ¨ä»“åº“åœ°å€é‡Œï¼Œä½ å¯ä»¥çœ‹åˆ°ç³»åˆ—æ–‡ç« çš„é¢˜è§£é“¾æ¥ã€ç³»åˆ—æ–‡ç« çš„ç›¸åº”ä»£ç ã€LeetCode åŸé¢˜é“¾æ¥å’Œå…¶ä»–ä¼˜é€‰é¢˜è§£ã€‚

